/*
 * Copyright (c) 2012 Planet Telex Inc. all rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function(b){var c=/(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,a=/(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g;
b.fn.linkify=function(d){d=b.extend({className:"linkified",target:"_self",nofollow:"true"},d);
var e=d.nofollow?' rel="nofollow"':"";
linkifyThis=function(){var j=this.childNodes,h=j.length;
while(h--){var l=j[h];
if(l.nodeType==3){var g=b.trim(l.nodeValue);
if(g){var f=String.format('$1<a href="http://$2" target="{0}" class="{1}"{2}>$2</a>$3',d.target,d.className,e);
var k=String.format('$1<a href="$2" target="{0}" class="{1}"{2}>$2</a>$5',d.target,d.className,e);
g=g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(c,f).replace(a,k);
b(l).after(g).remove()
}}else{if(l.nodeType==1&&!/^(a|button|textarea)$/i.test(l.tagName)){linkifyThis.call(l)
}}}};
String.format=function(h){if(arguments.length<=1){return h
}var g=arguments.length-2;
for(var f=0;
f<=g;
f++){h=h.replace(new RegExp("\\{"+f+"\\}","gi"),arguments[f+1])
}return h
};
return this.each(linkifyThis)
}
})(jQuery);